{% extends "base.html" %}

{% block construct_head %}
<!-- Need to rework this page like the other securities -->
  <link rel='stylesheet' href="{{ url_for('static', filename='styles/base_style.css') }}"/>
  <link rel='stylesheet' href="{{ url_for('static', filename='styles/port_style.css') }}" />

  <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.6/d3.min.js"></script>
  <script src="https://code.jquery.com/jquery-2.1.4.min.js"></script>

  <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
{% endblock %}

{% block construct %}
<div class='row weights-graph'>
  <div id='graph' class='col-lg-6 order-md-2 graph'>
    {% if not graph %}
    <div class='row'>
      <div class='col-11 extra-pad'>
        <h1 class='statement-title'>Directions for Mean-Variance Analysis:<sup class='footnote'><a href='#footnote1'>[1]</a></sup></h1>
      </div>
    </div>
    <div class='row'>
      <div class='col-11'>
        <ol class='port-first-level-list'>
          <li class='list-item first-level'>
            Select a Beginning and Ending date from the form dropdown calendars to the left
          </li>
          <li>
            Then either:
            <ul class='port-second-level-list'>
              <li class='list-item second-level'>
                <i>Select</i> securities by checking the checkboxes for randomly generated weights or;
              </li>
              <li class='list-item second-level'>
                <i>Define</i> portfolio weights as text inputs to compare against an indentical set of securities with randomly generated weights
              </li>
            </ul>
          </li>
          <li class='list-item first-level'>
            Click the <b>Submit</b> Button
          </li>
        </ol>
      </div>
    </div>

    {% else %}
      <script type='text/javascript' src="{{ url_for('static', filename='js/plot.js') }}"></script>
      <script> $(document).ready(function() {
        plot({{ graph|safe }}, 'graph')
      });
      </script>
    {% endif %}
  </div>
  <div class='col-lg-5 order-md-1 weights box-shadow'>
    <div class='row weights-title'>
      <h2>Give weights to securities:</h2>
    </div>
    <form method='POST'>
      <div class='form-row date-row'>
        <div class="input-group">
          <input type="date" class="form-control" name='date1' placeholder="04/01/2019"/>
          <div class='input-group-addon block-all-corners'>
            <span class="input-group-text">-</span>
          </div>
          <input type="date" class="form-control round-right-corners" name='date2' placeholder="04/12/2019"/>
          <button type="submit" class="btn btn-primary ml-3">Submit</button>
        </div>
      </div>
      <div id='titles' class='form-row'>
        <div class='col-12 d-inline-flex titles'>
          <div class='col-4 security-title'>
            Security Name
          </div>
          <div class='col-3 security-checkbox'>
            Select:
          </div>
          <div class='col-5 security-weight'>
            Define Weight:
          </div>
        </div>
      </div>
      {% for name, ticker in stocks.items() %}
        {% if name != 'S&P 500 Index' and name != 'Dow Jones Industrial Average': %}
          <div class='form-row'>
            <div class='col-12'>
              <div class='form-group'>
                <div class='input-group d-inline-flex align-items-center'>
                  <span class="input-group-addon col">{{ name }}</span>
                  <input class='col' type='checkbox' name='{{ ticker }}' />
                  <input class='form-control col' type='text' name='{{ ticker }}'/>
                </div>
              </div>
            </div>
          </div>
        {% endif %}
      {% endfor %}
    </form>
  </div>
</div>
<div id='footnotes' class='row'>
  <p id='footnote1'>[1] Weekend dates and holidays are currently not supported to conduct Mean-Variance Analysis </p>
</div>


{% endblock %}
