{% extends "base.html" %}

{% block AAPL_head %}
  <title>Apple Inc.</title>
  <link href="http://cdn.pydata.org/bokeh/release/bokeh-1.0.4.min.css" rel="stylesheet" type="text/css">
  <link href="http://cdn.pydata.org/bokeh/release/bokeh-widgets-1.0.4.min.css" rel="stylesheet" type="text/css">
  <link rel='stylesheet' href="{{ url_for('static', filename='styles/securities_style.css') }}"/>

  <script src="http://cdn.pydata.org/bokeh/release/bokeh-1.0.4.min.js"></script>
  <script src="http://cdn.pydata.org/bokeh/release/bokeh-widgets-1.0.4.min.js"></script>
  <script src="http://cdn.pydata.org/bokeh/release/bokeh-tables-1.0.4.min.js"></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.6/d3.min.js"></script>
  <script src="https://code.jquery.com/jquery-2.1.4.min.js"></script>
  <script src="https://d14fo0winaifog.cloudfront.net/plotly-basic.js"></script>
  <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>

  <!-- {{ price|safe }}
  {{ regress|safe }} -->
{% endblock %}

{% block AAPL_header %}
  <h1>Apple Inc.</h1>
{% endblock %}

{% block AAPL %}
<!-- auto-fit, auto-fill for complete article content. auto-fit expands to fill entire viewport if there are only a few items to display.
  auto-fill will maintain rules given if a few items to display; utilizes extra grid space for emptiness. fill desired.-->
  <section class='info'>
    <aside class='articles'>
      <h3 class='head'>Articles of Interest:</h3>
        <ul>
          <script src='OpacityChange.js'></script>
          {% for row, article in articles.iterrows() %}
          <li class='article'>
            <a href='{{ article["url"] }}'><img src='{{ article["urlToImage"] }}' alt='Image relating to article'/></a>
            <a href='{{ article["url"] }}'><p id='title'>{{ article['title'] }}</p></a>
            <br />
            <p id='description'>{{ article['description'] }}</p>
          </li>
          {% endfor %}
        </ul>

        <!-- <div>
          <p>Scripts would normally scrape <a href='https://wsj.com/news/markets'>WSJ news</a> for articles that match a subset of keywords for {{title}}.
          <a href='https://pythonanywhere.com'>PythonAnywhere</a> does not allow free accounts to conduct web scraping. Paid accounts, however,
          do and will be looked at as a viable option for this project. </p>
        </div> -->

    </aside>
    <aside class='company'>
      Company info will go here...
    </aside>
  </section>

  <form method='POST' class='date-selector'>
    <div class='enter'>
      <label class='date1' for='date1'>Beg. Date:</label><input type='date' name='date1' />
      <label class='date2' for='date2'>End Date:</label><input type='date' name='date2' />
      <button type='submit'>Change Date</button>
    </div>

    <div class='choose'>
      <!-- <input type='radio' name='range' value='1D' />Daily -->
      <input type='radio' name='range' value='1M' checked/>1M <!--Default will always be 1M which causes problems with Choose Date-->
      <input type='radio' name='range' value='3M' />3M
      <input type='radio' name='range' value='6M' />6M
      <input type='radio' name='range' value='1Y' />1Y
      <input type='radio' name='range' value='5Y' />5Y
      <button type='submit'>Change Date</button>
    </div>
  </form>

  <section class='graphs'>
    <div id='price' class='price'>
      <script>
        var graphs = {{price | safe}};
        Plotly.react('price', graphs, {}, {responsive:true});
      </script>
    </div>
    <div id='regression' class='regression'>
      <script>
        var graphs = {{regress | safe}};
        Plotly.react('regression', graphs, {}, {responsive:true});
      </script>
    </div>
  </section>
{% endblock %}
