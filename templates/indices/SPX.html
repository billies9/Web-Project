{% extends "base.html" %}

{% block SPX_head %}
  <title>S&P 500 Index</title>
  <link href="http://cdn.pydata.org/bokeh/release/bokeh-1.0.4.min.css" rel="stylesheet" type="text/css">
  <link href="http://cdn.pydata.org/bokeh/release/bokeh-widgets-1.0.4.min.css" rel="stylesheet" type="text/css">
  <link rel='stylesheet' href="{{ url_for('static', filename='styles/securities_style.css') }}"/>

  <script src="http://cdn.pydata.org/bokeh/release/bokeh-1.0.4.min.js"></script>
  <script src="http://cdn.pydata.org/bokeh/release/bokeh-widgets-1.0.4.min.js"></script>
  <script src="http://cdn.pydata.org/bokeh/release/bokeh-tables-1.0.4.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.6/d3.min.js"></script>
  <script src="https://code.jquery.com/jquery-2.1.4.min.js"></script>
  <script src="https://d14fo0winaifog.cloudfront.net/plotly-basic.js"></script>
  <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>

  <!-- {{ price|safe }}
  {{ regress|safe }} -->
{% endblock %}

{% block SPX_header %}
  <h1>S&P 500 Index</h1>
{% endblock %}

{% block SPX %}
<section class='info'>
  <aside class='articles'>
    <div class='head'>
      <h3 id='head'>Articles of Interest:</h3>
      <p id='attribution'><a href='https://www.wsj.com/'>WSJ</a> powered by <a href='https://newsapi.org/'>NewsApi.org</a></p>
    </div>
      <ul>
        <script src='OpacityChange.js'></script>
        {% for row, article in articles.iterrows() %}
        <li class='article'>
          <a href='{{ article["url"] }}'><img src='{{ article["urlToImage"] }}' alt='Image relating to article'/></a>
          <a href='{{ article["url"] }}'><p class='title'>{{ article['title'] }}</p></a>
          <p id='description'>{{ article['description'] }}</p>
        </li>
        {% endfor %}
      </ul>

      <!-- <div>
        <p>Scripts would normally scrape <a href='https://wsj.com/news/markets'>WSJ news</a> for articles that match a subset of keywords for {{title}}.
        <a href='https://pythonanywhere.com'>PythonAnywhere</a> does not allow free accounts to conduct web scraping. Paid accounts, however,
        do and will be looked at as a viable option for this project. </p>
      </div> -->

  </aside>
  <aside class='company'>
    Company info will go here...
  </aside>
</section>


  <section>
    <form method='POST'>
      <!-- <input type='radio' name='return_type' value='D' checked/>Daily -->
      <input type='radio' name='return_type' value='M' />Monthly
      <input type='radio' name='return_type' value='Y' />Yearly
      <span>  <!-- Return_Type form appear here -->
        <label class='date1' for='date1'>Beg. Date:</label><input type='date' name='date1' />
        <label class='date2' for='date2'>End Date:</label><input type='date' name='date2' />
      </span>
      <button type='submit'>Returns</button>
    </form>
    <div id='price' class='price'>
      <!-- {{ div1|safe }} -->
      <script>
        var graphs = {{price | safe}};
        Plotly.plot('price',graphs,{});
      </script>
    </div>
  </section>
{% endblock %}
